import{u as v,j as a,I as w,B as D,r as y,a as T,o as _,R as C,F as k,b as E,x as R,L as F,H as P}from"./index-9a39d6e8.js";import{S as I}from"./Select-462841ba.js";import{D as W,s as L,g as A,a as B,S as G}from"./sideDrawerSchema-f596e4ba.js";import{u as Q}from"./useGetTableData-9605a423.js";const U=i=>{var x,c,d,e,m,h;const{control:r}=v(),{masterData:n}=i,u=(d=(c=(x=n==null?void 0:n.resData)==null?void 0:x.data)==null?void 0:c.transaction_type)==null?void 0:d.map(p=>p),o=(h=(m=(e=n==null?void 0:n.resData)==null?void 0:e.data)==null?void 0:m.withdrawal_status)==null?void 0:h.map(p=>p);return a.jsxs("div",{className:"my-10",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 grid-flow-row gap-4 md:gap-6",children:[a.jsx(w,{control:r,type:"text",name:"userId",id:"userId",label:"User Id",placeholder:"Enter"}),a.jsx(w,{control:r,type:"text",name:"transactionId",id:"transactionId",label:"Transaction Id",placeholder:"Enter"}),a.jsx(w,{control:r,type:"number",name:"amount",id:"amount",label:"Amount",placeholder:"Enter"}),a.jsx(I,{control:r,name:"transactionType",options:u,label:"Transaction Type",placeholder:"Select"}),a.jsx(I,{control:r,name:"transactionStatus",options:o,label:"Transaction Status",placeholder:"Select"}),a.jsx(W,{name:"dateRange",control:r})]}),a.jsxs("div",{className:"flex gap-2 mt-6 md:mt-3",children:[a.jsx(D,{variant:"primary",type:"submit",children:"Submit"}),a.jsx(D,{variant:"secondary",type:"reset",children:"Clear"})]})]})},q=(i=!0)=>{const[r,n]=y.useState(i),[u,o]=y.useState(!1),[x,c]=y.useState(!1),d=T({mode:"onChange",resolver:_(L)}),{setValue:e}=d,m=t=>{var s,g;e("userId",t==null?void 0:t._id),e("amount",t==null?void 0:t.amount),e("transactionNo",t==null?void 0:t.transaction_id),e("transactionStatus",t==null?void 0:t.transaction_status),e("transactionDate",A((s=t==null?void 0:t.createdAt.split("T"))==null?void 0:s[0])),e("transactionTime",B((g=t==null?void 0:t.createdAt.split("T"))==null?void 0:g[1])),e("accountType",t==null?void 0:t.transaction_type)};return{isDrawerClose:r,isEdit:u,handleEdit:t=>{var s;if(n(!r),m(t),o(!0),((s=t==null?void 0:t.transaction_status)==null?void 0:s.toLowerCase())==="pending"){c(!0);return}c(!1),C("only pending status can be change","error")},handleView:t=>{n(!r),m(t),o(!1)},methods:d,setIsDrawerClose:n,isStatusPending:x}},H=i=>{const{columns:r,data:n=[],masterData:u}=i,{tableData:o}=Q(n),{isDrawerClose:x,setIsDrawerClose:c,isEdit:d,handleEdit:e,handleView:m,methods:h,isStatusPending:p}=q();return a.jsxs("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:[a.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[a.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:a.jsx("tr",{children:r&&(r==null?void 0:r.map(t=>a.jsx("th",{scope:"col",className:"px-6 py-3",children:t==null?void 0:t.name},t==null?void 0:t.id)))})}),a.jsx("tbody",{children:o&&(o==null?void 0:o.map((t,s)=>a.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[a.jsx("td",{scope:"row",className:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap text-base dark:text-white",children:t==null?void 0:t.user_id}),a.jsx("td",{scope:"row",className:"px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white text-base",children:t==null?void 0:t.amount}),a.jsx("td",{scope:"row",className:"px-6 py-4 text text-gray-900 whitespace-nowrap dark:text-white text-base",children:t==null?void 0:t.transaction_id}),a.jsx("td",{scope:"row",className:"px-6 py-4 text text-gray-900 whitespace-nowrap dark:text-white text-base",children:t==null?void 0:t.transaction_status}),a.jsx("td",{scope:"row",className:"px-6 py-4 text text-gray-900 whitespace-nowrap dark:text-white text-base",children:t==null?void 0:t.transaction_type}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("button",{className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",onClick:()=>m(t),children:"View"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("button",{className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",onClick:()=>e(t),children:"Edit"})})]},t.id||s)))})]}),a.jsx(k,{...h,children:a.jsx(G,{formId:"withdrawalForm",isDrawerClose:x,setIsDrawerClose:c,isEdit:d,isStatusPending:p,masterData:u})})]})},M=()=>({columns:[{id:1,name:"user Id"},{id:2,name:"Amount"},{id:3,name:"Withdrawal Request / Transaction no"},{id:4,name:"Status"},{id:5,name:"Type"},{id:6,name:"View"},{id:7,name:"Edit"}],data:[{id:"1",userId:5324,amount:13500,transactionNumber:1148602759,status:"Pending",type:"Bank A/c"},{id:"2",userId:3328,amount:15e3,transactionNumber:1148057204,status:"Success",type:"Upi"},{id:"3",userId:7392,amount:4e3,transactionNumber:1159365929,status:"Failed",type:"Upi"},{id:"4",userId:3591,amount:5e4,transactionNumber:1149205739,status:"Success",type:"Bank A/c"}]}),J=()=>{var t;const i=T({mode:"onChange"}),{handleSubmit:r}=i,[n,u]=y.useState({}),{data:o,isLoading:x}=E(),{data:c,refetch:d,isLoading:e}=R(n),m=(t=c==null?void 0:c.resData)==null?void 0:t.data,{columns:h}=M(),p=s=>{const g=()=>{var b,j,S,N;return(b=s.dateRange)!=null&&b.startDate&&((j=s.dateRange)!=null&&j.endDate)?`${(S=s.dateRange)==null?void 0:S.startDate}~${(N=s.dateRange)==null?void 0:N.endDate}`:""};u({amount:(s==null?void 0:s.amount)??"",transaction_id:(s==null?void 0:s.transactionId)??"",transaction_status:(s==null?void 0:s.transactionStatus)??"",transaction_type:(s==null?void 0:s.transactionType)??"",user_id:(s==null?void 0:s.userId)??"",date_range:g()}),d()};return a.jsxs(a.Fragment,{children:[(x||e)&&a.jsx(F,{}),a.jsx(P,{as:"h3",children:"Withdrawal Transaction Search"}),a.jsx(k,{...i,children:a.jsx("form",{onSubmit:r(p),children:a.jsx(U,{masterData:o})})}),a.jsx(H,{columns:h,data:m,masterData:o})]})};export{J as default};
