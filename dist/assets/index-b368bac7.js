import{d as j,e as o,C as N,a as R,E as S,J as k,K as q,j as r,L as E,M as w,P as p,N as f,I as t,B as L,o as O,R as d,O as C}from"./index-9a39d6e8.js";import{T as v}from"./Text-f69b4c95.js";const B=j().shape({oldPassword:o().required("old password is required"),newPassword:o().required("new password is required").min(6,"password is too short").max(16,"password is too long"),confirmPassword:o().required("confirm password is required").oneOf([N("newPassword")],"passwords must match")}),H=()=>{const{control:e,handleSubmit:h,reset:l}=R({mode:"onChange",resolver:O(B)}),{handleLogout:x}=S(),g=k(),[u,{isLoading:P}]=q(),y=async a=>{var n,i,c,m;const b={old_password:a==null?void 0:a.oldPassword,new_password:a==null?void 0:a.newPassword,confirm_password:a==null?void 0:a.confirmPassword};try{const s=await u(b);if(s!=null&&s.data&&((n=s==null?void 0:s.data[0])!=null&&n.status)){d((i=s==null?void 0:s.data[0])==null?void 0:i.message,"success"),l(),x(),g(C.LOGIN);return}d((m=(c=s==null?void 0:s.error)==null?void 0:c.data[0])==null?void 0:m.message,"error")}catch(s){throw d("Something went wrong","error"),new Error(String(s))}};return r.jsxs("section",{className:"bg-gray-50 dark:bg-gray-900",children:[P&&r.jsx(E,{}),r.jsxs("div",{className:"flex flex-col items-center justify-center px-6 pt-8 pb-4 mx-auto h-screen lg:py-0",children:[r.jsx(w,{to:p.DASHBOARD,className:"flex items-center mb-6 text-2xl font-semibold text-gray-900 dark:text-white",children:r.jsx(f,{})}),r.jsxs("div",{className:"w-full p-6 bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md dark:bg-gray-800 dark:border-gray-700 sm:p-8",children:[r.jsx("h2",{className:"mb-1 text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white",children:"Change Password"}),r.jsxs("form",{className:"my-4 space-y-4 lg:mt-5 md:space-y-5",onSubmit:h(y),children:[r.jsx(t,{control:e,name:"oldPassword",type:"password",label:"Old Password",id:"oldPassword",placeholder:"••••••••",isShowHideRequired:!0,isErrorVisible:!0}),r.jsx(t,{control:e,name:"newPassword",type:"password",label:"New Password",id:"newPassWord",placeholder:"••••••••",isShowHideRequired:!0,isErrorVisible:!0}),r.jsx(t,{control:e,name:"confirmPassword",type:"password",label:"Confirm Password",id:"confirmPassWord",placeholder:"••••••••",isShowHideRequired:!0,isErrorVisible:!0}),r.jsx(L,{variant:"primary",type:"submit",className:"w-full",children:"Reset Password"})]}),r.jsxs(v,{as:"p",children:["Back to Dashboard. ",r.jsx(w,{to:p.DASHBOARD,className:"font-medium text-primary-600 hover:underline dark:text-primary-500",children:"Go back"})]})]})]})]})};export{H as default};
