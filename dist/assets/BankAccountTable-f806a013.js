import{j as e,H as _,B as I,d as F,i as N,e as y,s as C,a as S,r as E,F as H,L as M,I as L,R as v,t as T,v as U,w as W}from"./index-9a39d6e8.js";import{u as z}from"./useGetTableData-9605a423.js";import{C as $}from"./index-0a3ad37f.js";import{C as R}from"./CheckBox-9c6c6f96.js";const Q=r=>{const{isHidden:i,setIsHidden:o,title:a,children:n,refetch:b}=r,l=()=>{o(!i),b()};return i?null:e.jsx("div",{id:"editUserModal",className:"fixed top-0 bg-black/50 inset-0 z-50 items-center justify-center w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%)] max-h-full",children:e.jsx("div",{className:"relative top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 w-full max-w-2xl max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 border-b rounded-t dark:border-gray-600",children:[e.jsx(_,{as:"h5",children:a}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"editUserModal",onClick:l,children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsx("div",{className:"p-6 space-y-6",children:n}),e.jsxs("div",{className:"flex items-center justify-end p-6 space-x-1 border-t border-gray-200 rounded-b dark:border-gray-600",children:[e.jsx(I,{variant:"primary",type:"reset",onClick:l,children:"okey"}),e.jsx(I,{variant:"secondary",onClick:l,children:"Close"})]})]})})})},X=F().shape({accountNumber:N().required("account number is required").typeError("account number must be number").positive("must be positive").integer("must be an integer").test("less than 10 digits","ten digits required",r=>r.toString().length>10).test("more than 18 digit","account number is too large",r=>r.toString().length<18),ifscCode:y().required("ifsc code is required").matches(/^[A-Za-z]{4}\d{7}$/,"enter a valid ifsc code"),branchName:y().required("branch name is required"),bankName:y().required("Bank name is required"),mobileNumber:y().required("Mobile number is required").test("10 digits","enter ten digits mobile number",r=>r.length===10).matches(/^[6-9][0-9]{9}$/,"Enter a valid mobile number"),totalAmount:N().typeError("Amount must be number").required("Amount is required"),customerId:y().required("Customer id is required"),password:y().required("Password is required"),minDepositLimit:N().required("min deposit limit is required").typeError("must be a number").positive("min deposit 1 Rs required").integer("must be an integer"),maxDepositLimit:N().required("max deposit limit is required").typeError("must be a number").positive("min deposit 1 Rs required").integer("must be an integer")}),P=r=>{const{isHidden:i,setIsHidden:o,editItem:a,refetch:n}=r,[b,{isLoading:l}]=C(),u=S({mode:"onChange",defaultValues:{bankAccountId:"",isActive:!1}}),{control:c,setValue:m,formState:{isDirty:k}}=u;E.useEffect(()=>{m("bankAccountId",a==null?void 0:a.bankAccountId),m("isActive",a==null?void 0:a.isActive)},[a,m]);const f=async h=>{var j,w,t,x,p,g;if(!k){v("please update account status","error");return}const A=h==null?void 0:h.bankAccountId;try{const s=await b({bankAccountId:A});(w=(j=s==null?void 0:s.data)==null?void 0:j.resData)!=null&&w.status?(v((x=(t=s==null?void 0:s.data)==null?void 0:t.resData)==null?void 0:x.message,"success"),n()):v((g=(p=s==null?void 0:s.data)==null?void 0:p.error)==null?void 0:g.message,"error")}catch(s){throw new Error(`An Error occurred ${s}`)}};return e.jsxs(H,{...u,children:[l&&e.jsx(M,{}),e.jsx($,{isLoading:!1,isHidden:i,setIsHidden:o,title:"Edit Bank Status",formSubmitHandler:f,children:e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsx("div",{className:"col-span-6 sm:col-span-3",children:e.jsx(L,{control:c,type:"text",name:"bankAccountId",id:"bankAccountId",placeholder:"Enter",label:"Bank Account Id",isErrorVisible:!0,isDisabled:!0})}),e.jsx("div",{className:"col-span-6 sm:col-span-3 flex align-end mt-3 ",children:e.jsx(R,{control:c,name:"isActive",label:a!=null&&a.isActive?"De Activate":"active"})})]})})]})},G=r=>{const{isHidden:i,setIsHidden:o,editItem:a,refetch:n}=r,[b,{isLoading:l}]=C(),u=S({mode:"onChange",defaultValues:{bankAccountId:"",isActive:!1}}),{control:c,setValue:m,formState:{isDirty:k}}=u;E.useEffect(()=>{m("bankAccountId",a==null?void 0:a.bankAccountId),m("isActive",a==null?void 0:a.isActive)},[a,m]);const f=async h=>{var j,w,t,x,p,g;if(!k){v("please update account status","error");return}const A=h==null?void 0:h.bankAccountId;try{const s=await b({bankAccountId:A});(w=(j=s==null?void 0:s.data)==null?void 0:j.resData)!=null&&w.status?(v((x=(t=s==null?void 0:s.data)==null?void 0:t.resData)==null?void 0:x.message,"success"),o(!0),n()):(v((g=(p=s==null?void 0:s.error)==null?void 0:p.data)==null?void 0:g.messgae,"error"),o(!1))}catch(s){throw new Error(`An Error occurred ${s}`)}};return e.jsxs(H,{...u,children:[l&&e.jsx(M,{}),e.jsx($,{isLoading:!1,isHidden:i,setIsHidden:o,title:"Edit Bank Status",formSubmitHandler:f,children:e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsx("div",{className:"col-span-6 sm:col-span-3",children:e.jsx(L,{control:c,type:"text",name:"bankAccountId",id:"bankAccountId",placeholder:"Enter",label:"Bank Account Id",isErrorVisible:!0,isDisabled:!0})}),e.jsx("div",{className:"col-span-6 sm:col-span-3 flex align-end mt-3 ",children:e.jsx(R,{control:c,name:"isActive",label:a!=null&&a.isActive?"De Activate":"active"})})]})})]})},Y=r=>{const{columns:i,data:o=[],refetch:a}=r,{tableData:n}=z(o),[b,l]=E.useState({}),[u,c]=E.useState(!0),m=T(),{pathname:k}=m,[f]=U(),[h]=W(),A=t=>{c(!u),l(t)},j=t=>k.includes("withdrawal")?h(t):f(t),w=async t=>{var p,g,s,q,B,D;const x=t==null?void 0:t.bankAccountId;try{const d=await j(x);(g=(p=d==null?void 0:d.data)==null?void 0:p.resData)!=null&&g.status?(v((q=(s=d==null?void 0:d.data)==null?void 0:s.resData)==null?void 0:q.message,"success"),c(!0),a()):(v((D=(B=d==null?void 0:d.error)==null?void 0:B.data)==null?void 0:D.message,"error"),c(!1))}catch(d){throw new Error(`An New Error occurred ${d}`)}};return e.jsxs("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:[e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsx("tr",{children:i&&(i==null?void 0:i.map(t=>e.jsx("th",{scope:"col",className:"px-6 py-3",children:t==null?void 0:t.name},t==null?void 0:t.id)))})}),e.jsx("tbody",{children:n&&(n==null?void 0:n.map((t,x)=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white",children:e.jsx("p",{className:"text-base font-semibold",children:t==null?void 0:t.account_number})}),e.jsx("th",{scope:"row",className:"px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white",children:e.jsx("p",{className:"text-base font-semibold",children:t==null?void 0:t.bank_name})}),e.jsx("th",{scope:"row",className:"px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white",children:e.jsx("p",{className:"text-base font-semibold",children:t==null?void 0:t.branch_name})}),e.jsx("th",{scope:"row",className:"px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white",children:e.jsx("p",{className:"text-base font-semibold",children:(t==null?void 0:t.total_withdraw_amount)||(t==null?void 0:t.total_deposit_amount)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center",children:t.isActive?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-green-500 mr-2"})," active"]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-red-500 mr-2"})," In Active"]})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",onClick:()=>A(t),children:"Edit"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{className:"ont-medium text-red-600 dark:text-red-500 hover:underline",onClick:()=>w(t),children:"Delete"})})]},t.id||x)))})]}),k.includes("withdrawal")?e.jsx(P,{editItem:b,isHidden:u,setIsHidden:c,tableData:n,refetch:a}):e.jsx(G,{editItem:b,isHidden:u,setIsHidden:c,tableData:n,refetch:a})]})};export{Y as B,Q as M,X as a};
