import{u as k,r as g,j as a,I as b,B as N,a as I,o as v,R as _,F as T,b as E,c as C,L as F,H as R}from"./index-9a39d6e8.js";import{S as P}from"./Select-462841ba.js";import{D as L,s as A,g as l,a as B,S as G}from"./sideDrawerSchema-f596e4ba.js";import{u as M}from"./useGetTableData-9605a423.js";const Q=i=>{var m,c,n,u,x,h;const{control:e,setValue:d}=k(),{masterData:o}=i,r=(n=(c=(m=o==null?void 0:o.resData)==null?void 0:m.data)==null?void 0:c.transaction_type)==null?void 0:n.map(t=>t),p=(h=(x=(u=o==null?void 0:o.resData)==null?void 0:u.data)==null?void 0:x.deposit_status)==null?void 0:h.map(t=>t);return g.useEffect(()=>{d("transactionType",r==null?void 0:r[0])},[r,o]),a.jsxs("div",{className:"my-10",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 grid-flow-row gap-4 md:gap-6",children:[a.jsx(b,{control:e,type:"number",name:"userId",id:"userId",label:"User Id",placeholder:"Enter"}),a.jsx(b,{control:e,type:"text",name:"transactionId",id:"transactionId",label:"Transaction Id",placeholder:"Enter"}),a.jsx(b,{control:e,type:"number",name:"amount",id:"amount",label:"Amount",placeholder:"Enter"}),a.jsx(b,{control:e,type:"text",name:"transactionType",id:"transactionType",label:"Transaction Type",placeholder:"Enter",isDisabled:!0}),a.jsx(P,{control:e,name:"transactionStatus",options:p,label:"Transaction Status",placeholder:"Select"}),a.jsx(L,{name:"dateRange",control:e})]}),a.jsxs("div",{className:"flex gap-2 mt-6 md:mt-3",children:[a.jsx(N,{variant:"primary",type:"submit",children:"Submit"}),a.jsx(N,{variant:"secondary",type:"reset",children:"Clear"})]})]})},U={userId:"",amount:null,transactionNo:null,transactionStatus:null,transactionDate:null,transactionTime:null,newField:null},q=(i=!0)=>{const[e,d]=g.useState(i),[o,r]=g.useState(!1),[p,m]=g.useState(!1),c=I({defaultValues:U,mode:"onChange",resolver:v(A)}),{setValue:n}=c,u=t=>{var s,y;n("userId",t==null?void 0:t._id),n("amount",t==null?void 0:t.amount),n("transactionNo",t==null?void 0:t.transaction_id),n("transactionStatus",t==null?void 0:t.transaction_status),n("transactionDate",l((s=t==null?void 0:t.createdAt.split("T"))==null?void 0:s[0])),n("transactionTime",B((y=t==null?void 0:t.createdAt.split("T"))==null?void 0:y[1])),n("accountType",t==null?void 0:t.transaction_type),n("screenshot",t==null?void 0:t.screenshot)};return{isDrawerClose:e,isEdit:p,handleEdit:t=>{var s;if(d(!e),u(t),m(!0),((s=t==null?void 0:t.transaction_status)==null?void 0:s.toLowerCase())==="manual"){r(!0);return}r(!1),_("only Manual status can be edited","error")},handleView:t=>{d(!e),u(t),m(!1)},methods:c,setIsDrawerClose:d,isStatusPending:o}},H=i=>{const{columns:e,data:d=[],masterData:o}=i,{tableData:r}=M(d),{isDrawerClose:p,setIsDrawerClose:m,isEdit:c,handleEdit:n,handleView:u,methods:x,isStatusPending:h}=q();return a.jsxs("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:[a.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[a.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:a.jsx("tr",{children:e&&(e==null?void 0:e.map(t=>a.jsx("th",{scope:"col",className:"px-6 py-3",children:t==null?void 0:t.name},t==null?void 0:t.id)))})}),a.jsx("tbody",{children:r&&(r==null?void 0:r.map((t,s)=>a.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[a.jsx("td",{scope:"row",className:"flex items-center px-6 py-4 text-gray-900 whitespace-nowrap text-base dark:text-white",children:t==null?void 0:t.user_id}),a.jsx("td",{scope:"row",className:"px-6 py-4 text-gray-900 whitespace-nowrap dark:text-white text-base",children:t==null?void 0:t.amount}),a.jsx("td",{scope:"row",className:"px-6 py-4 text text-gray-900 whitespace-nowrap dark:text-white text-base",children:t==null?void 0:t.transaction_id}),a.jsx("td",{scope:"row",className:"px-6 py-4 text text-gray-900 whitespace-nowrap dark:text-white text-base",children:t==null?void 0:t.transaction_status}),a.jsx("td",{scope:"row",className:"px-6 py-4 text text-gray-900 whitespace-nowrap dark:text-white text-base",children:t==null?void 0:t.transaction_type}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("button",{className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",onClick:()=>u(t),children:"View"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("button",{className:"font-medium text-blue-600 dark:text-blue-500 hover:underline",onClick:()=>n(t),children:"Edit"})})]},t.id||s)))})]}),a.jsx(T,{...x,children:a.jsx(G,{formId:"depositForm",isDrawerClose:p,setIsDrawerClose:m,isEdit:c,masterData:o,isStatusPending:h})})]})},$=()=>({columns:[{id:1,name:"user Id"},{id:2,name:"Amount"},{id:3,name:"Deposit Request / Transaction no"},{id:4,name:"Status"},{id:5,name:"Type"},{id:6,name:"View"},{id:7,name:"Edit"}],data:[{id:"1",userId:5324,amount:13500,transactionNumber:1148602759,status:"Pending",type:"Bank A/c"},{id:"2",userId:3328,amount:15e3,transactionNumber:1148057204,status:"Success",type:"Upi"},{id:"3",userId:7392,amount:4e3,transactionNumber:1159365929,status:"Failed",type:"Upi"},{id:"4",userId:3591,amount:5e4,transactionNumber:1149205739,status:"Success",type:"Bank A/c"}]}),X=()=>{var t;const i=I(),{handleSubmit:e}=i,[d,o]=g.useState({}),{columns:r}=$(),{data:p,isLoading:m}=E(),{data:c,refetch:n,isLoading:u}=C(d),x=(t=c==null?void 0:c.resData)==null?void 0:t.data,h=s=>{const y=()=>{var w,j,D,S;return(w=s.dateRange)!=null&&w.startDate&&((j=s.dateRange)!=null&&j.endDate)?`${(D=s.dateRange)==null?void 0:D.startDate}~${(S=s.dateRange)==null?void 0:S.endDate}`:""};o({amount:(s==null?void 0:s.amount)??"",transaction_id:(s==null?void 0:s.transactionId)??"",transaction_status:(s==null?void 0:s.transactionStatus)??"",transaction_type:(s==null?void 0:s.transactionType)??"",user_id:(s==null?void 0:s.userId)??"",date_range:y()}),n()};return a.jsxs(g.Fragment,{children:[(m||u)&&a.jsx(F,{}),a.jsx(R,{as:"h3",children:"Deposit Transaction Search"}),a.jsx(T,{...i,children:a.jsx("form",{onSubmit:e(h),children:a.jsx(Q,{masterData:p})})}),a.jsx(H,{columns:r,data:x,masterData:p})]})};export{X as default};
