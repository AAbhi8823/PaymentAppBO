import{d as B,e as i,Q as P,C as v,f as t,V as T,a as $,S as M,b as H,j as e,L as _,H as L,I as m,B as q,o as O,R as S}from"./index-9a39d6e8.js";import{C as o}from"./CheckBox-9c6c6f96.js";import{S as W}from"./Select-462841ba.js";let h=B().shape({email:i().required("username is required"),mobileNumber:i().required("Mobile number is required").test("10 digits","enter ten digits mobile number",s=>s.length===10).matches(/^[6-9][0-9]{9}$/,"Enter a valid mobile number"),password:i().required("password is required").min(6,"password is too short").max(16,"password is too long"),confirmPassword:P().required("confirm password is required").oneOf([v("password")],"passwords must match"),accountType:i().required("Account Type is required"),dashboard:t(),withdrawal:t(),register:t(),report:t(),manageDepositAccount:t(),manageBankAccount:t(),deposit:t()});h=h.test("page access allowed","",s=>s.dashboard||s.register||s.withdrawal||s.report||s.manageBankAccount||s.manageDepositAccount||s.deposit?!0:new T("must select any page",null,"pageAccessAllowed"));const F=h,U=()=>{var x,A,y,j;const{control:s,handleSubmit:k,reset:b,formState:{errors:n}}=$({mode:"onChange",resolver:O(F)}),[C,{isLoading:w}]=M(),{data:d}=H(),E=(y=(A=(x=d==null?void 0:d.resData)==null?void 0:x.data)==null?void 0:A.account_type)==null?void 0:y.map(r=>r),N=()=>b(),D=r=>Object.entries(r).filter(a=>a[a.length-1]==!0).map(a=>a[0]),R=async r=>{var l,p,g,a;try{const u={email:r==null?void 0:r.email,mobile_number:r==null?void 0:r.mobileNumber,password:r==null?void 0:r.password,confirm_password:r==null?void 0:r.confirmPassword,account_type:r==null?void 0:r.accountType,pageAccessAllowed:D(r)},c=await C(u);(p=(l=c==null?void 0:c.data)==null?void 0:l.resData)!=null&&p.status&&(S((a=(g=c==null?void 0:c.data)==null?void 0:g.resData)==null?void 0:a.message,"success"),b())}catch(u){throw S("Something Went Wrong","error"),new Error(String(u))}};return e.jsxs("section",{children:[w&&e.jsx(_,{}),e.jsx(L,{as:"h3",children:"Create Account"}),e.jsxs("form",{className:"my-10",onSubmit:k(R),children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:grid-6",children:[e.jsx(m,{type:"email",name:"email",control:s,label:"Email/Username",placeholder:"someone@email.com",isErrorVisible:!0}),e.jsx(m,{control:s,name:"mobileNumber",label:"Mobile number",type:"number",isErrorVisible:!0,placeholder:"Enter"}),e.jsx(m,{type:"password",name:"password",control:s,label:"Password",placeholder:"••••••••",isErrorVisible:!0,isShowHideRequired:!0}),e.jsx(m,{type:"password",name:"confirmPassword",control:s,label:"Confirm password",placeholder:"••••••••",isErrorVisible:!0,isShowHideRequired:!0}),e.jsx(W,{control:s,name:"accountType",options:E,label:"Account Type",placeholder:"Select",isErrorVisible:!0})]}),e.jsx("label",{className:"block my-4 md:my-6 text-sm font-medium text-gray-900 dark:text-white",children:"Page Access allowed"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:[e.jsx(o,{control:s,name:"dashboard",label:"Dashboard"}),e.jsx(o,{control:s,name:"withdrawal",label:"Withdrawal"}),e.jsx(o,{control:s,name:"register",label:"Register"}),e.jsx(o,{control:s,name:"report",label:"Report"}),e.jsx(o,{control:s,name:"manageDepositAccount",label:"Manage Deposit Account"}),e.jsx(o,{control:s,name:"manageBankAccount",label:"Manage Bank Account"}),e.jsx(o,{control:s,name:"deposit",label:"Deposit"})]}),n&&e.jsx("p",{className:"mt-4 text-sm text-red-600 dark:text-red-500",children:(j=n==null?void 0:n.pageAccessAllowed)==null?void 0:j.message}),e.jsxs("div",{className:"flex gap-2 mt-8 md:mt-6",children:[e.jsx(q,{variant:"primary",type:"submit",children:"Create an account"}),e.jsx(q,{variant:"secondary",type:"reset",isDisabled:w,onClick:N,children:"Reset"})]})]})]})};export{U as default};
